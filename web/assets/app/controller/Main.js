Ext.define("GatotKacaErp.controller.Main",{extend:"Ext.app.Controller",init:function(){var a=this;a.getStore("GatotKacaErp.store.TreeStore");a.control({mainmenu:{itemclick:a.onMenuClick},"mainmenu button[action=refresh]":{click:a.reloadMenu}});a.callParent(arguments)},onMenuClick:function(k,d,m,f,g,h){var i=this;var b=Ext.getCmp("mainTab");if(d.data.cls!="root"){var a=d.data.cls.replace(/_/g,".");var c=a.replace(/view/,"controller");var l=a.replace(/view/,"store");Ext.getBody().mask("Loading Module...","x-mask-loading");if(b.getChildByElement(d.data.selector)===null){var j=Ext.getCmp(d.data.selector);if(j!==undefined){j.destroy();i.getStore(l).load()}Ext.syncRequire(a,function(){i.getController(c);var e=Ext.create(a,{iconCls:d.data.iconCls,title:d.data.text,id:d.data.selector,alias:"widget."+d.data.selector});b.add(e);b.setActiveTab(e)})}else{i.getStore(l).load();b.setActiveTab(d.data.selector)}Ext.getBody().unmask()}},reloadMenu:function(){Ext.getBody().mask("Loading Menu...","x-mask-loading");this.getStore("GatotKacaErp.store.TreeStore").load({callback:function(){Ext.getBody().unmask()}})}});