Ext.define("GatotKacaErp.module.HumanResources.controller.OverTimeByDate",{extend:"GatotKacaErp.controller.Base",views:["GatotKacaErp.module.HumanResources.view.OverTimeByDate"],store:"GatotKacaErp.module.HumanResources.store.OverTimeByDate",startDate:"otByDateFilterFrom",endDate:"otByDateFilterTo",init:function(){var b=this;var a=b.getStore(b.store);a.addListener("load",b.onOtLoad,b);b.loadStore(a);b.control({"gridovertimebydate datefield[name=otByDateFilterFrom]":{change:b.filter},"gridovertimebydate datefield[name=otByDateFilterTo]":{change:b.filter}});b.callParent(arguments)},onOtLoad:function(c,a,d){this.operationCheck(d);Ext.getCmp("HumanResourcesOtByDateTotal").update("");var b=Ext.getCmp("gridovertimebydate").total;b=0;Ext.each(a,function(e,f){if(e.data.ot_status===true){b+=e.data.ot_real}});Ext.getCmp("HumanResourcesOtByDateTotal").update("Total : "+b+" hours")},filter:function(b,a,d){var c=this;var f=Ext.Date.format(Ext.getCmp(c.startDate).getValue(),"Y-m-d");var e=Ext.Date.format(Ext.getCmp(c.endDate).getValue(),"Y-m-d");if(f!=""&&e!=""){this.loadStore(c.store,{from:f,to:e})}}});