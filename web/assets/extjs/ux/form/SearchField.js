Ext.define("Ext.ux.form.SearchField",{extend:"Ext.form.field.Trigger",alias:"widget.searchfield",trigger1Cls:Ext.baseCSSPrefix+"form-clear-trigger",trigger2Cls:Ext.baseCSSPrefix+"form-search-trigger",hasSearch:false,paramName:"query",initComponent:function(){var a=this;a.callParent(arguments);a.on("specialkey",function(b,c){if(c.getKey()==c.ENTER){a.onTrigger2Click()}});a.store.remoteFilter=true;if(!a.store.proxy.hasOwnProperty("filterParam")){a.store.proxy.filterParam=a.paramName}a.store.proxy.encodeFilters=function(b){return b[0].value}},afterRender:function(){this.callParent();this.triggerCell.item(0).setDisplayed(false)},onTrigger1Click:function(){var a=this;if(a.hasSearch){a.setValue("");a.store.clearFilter();a.hasSearch=false;a.triggerCell.item(0).setDisplayed(false);a.updateLayout()}},onTrigger2Click:function(){var a=this,b=a.getValue();if(b.length>0){a.store.filter({id:a.paramName,property:a.paramName,value:b});a.hasSearch=true;a.triggerCell.item(0).setDisplayed(true);a.updateLayout()}}});