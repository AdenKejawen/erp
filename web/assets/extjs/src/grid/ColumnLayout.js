Ext.define("Ext.grid.ColumnLayout",{extend:"Ext.layout.container.HBox",alias:"layout.gridcolumn",type:"gridcolumn",reserveOffset:false,firstHeaderCls:Ext.baseCSSPrefix+"column-header-first",lastHeaderCls:Ext.baseCSSPrefix+"column-header-last",initLayout:function(){this.grid=this.owner.up("[scrollerOwner]");this.callParent()},beginLayout:function(h){var g=this,e=g.grid,b=e.view,d=0,c=g.getVisibleItems(),a=c.length,f;if(e.lockable){if(g.owner.up("tablepanel")===b.normalGrid){b=b.normalGrid.getView()}else{b=null}}g.callParent(arguments);for(;d<a;d++){f=c[d];f.removeCls([g.firstHeaderCls,g.lastHeaderCls]);f.el.setStyle({height:"auto"});f.titleEl.setStyle({height:"auto",paddingTop:""})}if(a>0){c[0].addCls(g.firstHeaderCls);c[a-1].addCls(g.lastHeaderCls)}if(!g.owner.isHeader&&Ext.getScrollbarSize().width&&!e.collapsed&&b&&b.rendered&&(h.viewTable=b.body.dom)){h.viewContext=h.context.getCmp(b)}},roundFlex:function(a){return Math.floor(a)},calculate:function(a){this.callParent(arguments);if(a.state.parallelDone){a.setProp("columnWidthsDone",true)}if(a.viewContext){a.state.tableHeight=a.viewTable.offsetHeight}},completeLayout:function(d){var b=this,a=b.owner,c=d.state;b.callParent(arguments);if(!d.flexedItems.length&&!c.flexesCalculated&&a.forceFit&&!a.isHeader){if(b.convertWidthsToFlexes(d)){b.cacheFlexes(d);d.invalidate({state:{flexesCalculated:true}})}}},convertWidthsToFlexes:function(a){var f=this,d=0,g=f.sizeModels.calculated,c,e,b,j,h;c=a.childItems;e=c.length;for(b=0;b<e;b++){j=c[b];h=j.target;d+=j.props.width;h.flex=a.childItems[b].flex=j.props.width;h.width=null;j.widthModel=g}return d!==a.props.width},finalizeLayout:function(){var f=this,e=0,d,b,g,a=f.owner,c=a.titleEl;d=f.getVisibleItems();b=d.length;g=a.el.getViewSize().height;if(c){g-=c.getHeight()}for(;e<b;e++){d[e].setPadding(g)}},getContainerSize:function(e){var d=this,a=d.callParent(arguments),c=e.viewContext,b;if(c&&!c.heightModel.shrinkWrap&&c.target.componentLayout.ownerContext){b=c.getProp("height");if(isNaN(b)){d.done=false}else{if(e.state.tableHeight>b){a.width-=Ext.getScrollbarSize().width;e.state.parallelDone=false;c.invalidate()}}}return a},publishInnerCtSize:function(e){var d=this,c=e.state.boxPlan.targetSize,b=e.peek("contentWidth"),a;if((b!=null)&&!d.owner.isHeader){c.width=b;a=d.owner.ownerCt.view;if(a.scrollFlags.y){c.width+=Ext.getScrollbarSize().width}}return d.callParent(arguments)}});