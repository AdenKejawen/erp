Ext.define("Ext.grid.locking.HeaderContainer",{extend:"Ext.grid.header.Container",requires:["Ext.grid.ColumnManager"],constructor:function(d){var c=this,a,b,g=[],f=d.lockedGrid,e=d.normalGrid;c.lockable=d;c.callParent();f.columnManager.rootColumns=e.columnManager.rootColumns=d.columnManager=c.columnManager=new Ext.grid.ColumnManager(f.headerCt,e.headerCt);a=f.headerCt.events;for(b in a){if(a.hasOwnProperty(b)){g.push(b)}}c.relayEvents(f.headerCt,g);c.relayEvents(e.headerCt,g)},getRefItems:function(){return this.lockable.lockedGrid.headerCt.getRefItems().concat(this.lockable.normalGrid.headerCt.getRefItems())},getGridColumns:function(){return this.lockable.lockedGrid.headerCt.getGridColumns().concat(this.lockable.normalGrid.headerCt.getGridColumns())},getColumnsState:function(){var b=this,a=b.lockable.lockedGrid.headerCt.getColumnsState(),c=b.lockable.normalGrid.headerCt.getColumnsState();return a.concat(c)},applyColumnsState:function(g){var o=this,e=o.lockable.lockedGrid,f=e.headerCt,m=o.lockable.normalGrid.headerCt,p=Ext.Array.toValueMap(f.items.items,"headerId"),h=Ext.Array.toValueMap(m.items.items,"headerId"),l=[],n=[],k=1,b=g.length,j,a,d,c;for(j=0;j<b;j++){c=g[j];d=p[c.id];a=d||h[c.id];if(a){if(a.applyColumnState){a.applyColumnState(c)}if(a.locked===undefined){a.locked=!!d}if(a.locked){l.push(a);if(!a.hidden&&typeof a.width=="number"){k+=a.width}}else{n.push(a)}}}if(l.length+n.length==f.items.getCount()+m.items.getCount()){f.removeAll(false);m.removeAll(false);f.add(l);m.add(n);e.setWidth(k)}}});