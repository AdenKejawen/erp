Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",requires:["Ext.chart.Shape","Ext.fx.Anim"],type:"radar",alias:"series.radar",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(c){this.callParent(arguments);var e=this,a=e.chart.surface,d,b;e.group=a.getGroup(e.seriesId);if(e.showMarkers){e.markerGroup=a.getGroup(e.seriesId+"-markers")}},drawSeries:function(){var v=this,c=v.chart.getChartStore(),R=c.data.items,S,H,w=v.group,A,T=v.chart,K=T.series.items,L,u,k,P=T.animate,n=v.field||v.yField,J=T.surface,E=T.chartBBox,D=v.seriesIdx,h=v.colorArrayStyle,f,e,z,M,q=0,a=[],C=Math.max,j=Math.cos,r=Math.sin,p=Math.PI*2,O=c.getCount(),g,N,I,G,F,Q,t,m=v.seriesStyle,b=v.seriesLabelStyle,o=T.resizing||!v.radar,B=T.axes&&T.axes.get(0),U=!(B&&B.maximum);v.setBBox();q=U?0:(B.maximum||0);Ext.apply(m,v.style||{});if(!c||!c.getCount()||v.seriesIsHidden){v.hide();v.items=[];if(v.radar){v.radar.hide(true)}v.radar=null;return}if(!m.stroke){m.stroke=h[v.themeIdx%h.length]}v.unHighlightItem();v.cleanHighlights();f=v.centerX=E.x+(E.width/2);e=v.centerY=E.y+(E.height/2);v.radius=M=Math.min(E.width,E.height)/2;v.items=z=[];if(U){for(L=0,u=K.length;L<u;L++){k=K[L];a.push(k.yField)}for(S=0;S<O;S++){H=R[S];for(Q=0,t=a.length;Q<t;Q++){q=C(+H.get(a[Q]),q)}}}q=q||1;g=[];N=[];for(Q=0;Q<O;Q++){H=R[Q];F=M*H.get(n)/q;I=F*j(Q/O*p);G=F*r(Q/O*p);if(Q==0){N.push("M",I+f,G+e);g.push("M",0.01*I+f,0.01*G+e)}else{N.push("L",I+f,G+e);g.push("L",0.01*I+f,0.01*G+e)}z.push({sprite:false,point:[f+I,e+G],storeItem:H,series:v})}N.push("Z");if(!v.radar){v.radar=J.add(Ext.apply({type:"path",group:w,path:g},m||{}))}if(T.resizing){v.radar.setAttributes({path:g},true)}if(T.animate){v.onAnimate(v.radar,{to:Ext.apply({path:N},m||{})})}else{v.radar.setAttributes(Ext.apply({path:N},m||{}),true)}if(v.showMarkers){v.drawMarkers()}v.renderLabels();v.renderCallouts()},drawMarkers:function(){var m=this,j=m.chart,a=j.surface,o=j.getChartStore(),b=Ext.apply({},m.markerStyle||{}),h=Ext.apply(b,m.markerConfig,{fill:m.colorArrayStyle[m.themeIdx%m.colorArrayStyle.length]}),k=m.items,n=h.type,r=m.markerGroup,e=m.centerX,d=m.centerY,q,g,c,f,p;delete h.type;for(g=0,c=k.length;g<c;g++){q=k[g];f=r.getAt(g);if(!f){f=Ext.chart.Shape[n](a,Ext.apply({group:r,x:0,y:0,translate:{x:e,y:d}},h))}else{f.show()}q.sprite=f;if(j.resizing){f.setAttributes({x:0,y:0,translate:{x:e,y:d}},true)}f._to={translate:{x:q.point[0],y:q.point[1]}};p=m.renderer(f,o.getAt(g),f._to,g,o);p=Ext.applyIf(p||{},h||{});if(j.animate){m.onAnimate(f,{to:p})}else{f.setAttributes(p,true)}}},isItemInPoint:function(c,f,e){var b,d=10,a=Math.abs;b=e.point;return(a(b[0]-c)<=d&&a(b[1]-f)<=d)},onCreateLabel:function(f,l,e,g){var h=this,k=h.labelsGroup,a=h.label,d=h.centerX,c=h.centerY,j=l.point,b=Ext.apply(h.seriesLabelStyle||{},a);return h.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:k,x:d,y:c},a||{}))},onPlaceLabel:function(p,g,r,f,j,b){var l=this,k=l.chart,h=k.resizing,c=l.label,q=c.renderer,o=c.field,e=l.centerX,d=l.centerY,a={x:r.point[0],y:r.point[1]},n=a.x-e,m=a.y-d;p.setAttributes({text:q(g.get(o)),hidden:true},true);if(h){p.setAttributes({x:e,y:d},true)}if(b){p.show(true);l.onAnimate(p,{to:a})}else{p.setAttributes(a,true);p.show(true)}},toggleAll:function(a){var e=this,b,d,f,c;if(!a){Ext.chart.series.Radar.superclass.hideAll.call(e)}else{Ext.chart.series.Radar.superclass.showAll.call(e)}if(e.radar){e.radar.setAttributes({hidden:!a},true);if(e.radar.shadows){for(b=0,c=e.radar.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(a){var d=this,c=d.markerGroup&&d.markerGroup.getCount()||0,b=a||0;for(;b<c;b++){d.markerGroup.getAt(b).hide(true)}},getAxesForXAndYFields:function(){var c=this,b=c.chart,d=b.axes,a=[].concat(d&&d.get(0));return{yAxis:a}}});