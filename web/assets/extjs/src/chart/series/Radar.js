Ext.define("Ext.chart.series.Radar",{extend:"Ext.chart.series.Series",requires:["Ext.chart.Shape","Ext.fx.Anim"],type:"radar",alias:"series.radar",rad:Math.PI/180,showInLegend:false,style:{},constructor:function(b){this.callParent(arguments);var c=this,a=c.chart.surface;c.group=a.getGroup(c.seriesId);if(c.showMarkers){c.markerGroup=a.getGroup(c.seriesId+"-markers")}},drawSeries:function(){var t=this,b=t.chart.getChartStore(),M=b.data.items,N,D,u=t.group,O=t.chart,G=O.series.items,H,r,j,m=t.field||t.yField,F=O.surface,A=O.chartBBox,g=t.colorArrayStyle,e,c,v,I,o=0,a=[],z=Math.max,h=Math.cos,p=Math.sin,n=Math.PI*2,K=b.getCount(),f,J,E,C,B,L,q,k=t.seriesStyle,w=O.axes&&O.axes.get(0),P=!(w&&w.maximum);t.setBBox();o=P?0:(w.maximum||0);Ext.apply(k,t.style||{});if(!b||!b.getCount()||t.seriesIsHidden){t.hide();t.items=[];if(t.radar){t.radar.hide(true)}t.radar=null;return}if(!k.stroke){k.stroke=g[t.themeIdx%g.length]}t.unHighlightItem();t.cleanHighlights();e=t.centerX=A.x+(A.width/2);c=t.centerY=A.y+(A.height/2);t.radius=I=Math.min(A.width,A.height)/2;t.items=v=[];if(P){for(H=0,r=G.length;H<r;H++){j=G[H];a.push(j.yField)}for(N=0;N<K;N++){D=M[N];for(L=0,q=a.length;L<q;L++){o=z(+D.get(a[L]),o)}}}o=o||1;f=[];J=[];for(L=0;L<K;L++){D=M[L];B=I*D.get(m)/o;E=B*h(L/K*n);C=B*p(L/K*n);if(L==0){J.push("M",E+e,C+c);f.push("M",0.01*E+e,0.01*C+c)}else{J.push("L",E+e,C+c);f.push("L",0.01*E+e,0.01*C+c)}v.push({sprite:false,point:[e+E,c+C],storeItem:D,series:t})}J.push("Z");if(!t.radar){t.radar=F.add(Ext.apply({type:"path",group:u,path:f},k||{}))}if(O.resizing){t.radar.setAttributes({path:f},true)}if(O.animate){t.onAnimate(t.radar,{to:Ext.apply({path:J},k||{})})}else{t.radar.setAttributes(Ext.apply({path:J},k||{}),true)}if(t.showMarkers){t.drawMarkers()}t.renderLabels();t.renderCallouts()},drawMarkers:function(){var m=this,j=m.chart,a=j.surface,o=j.getChartStore(),b=Ext.apply({},m.markerStyle||{}),h=Ext.apply(b,m.markerConfig,{fill:m.colorArrayStyle[m.themeIdx%m.colorArrayStyle.length]}),k=m.items,n=h.type,r=m.markerGroup,e=m.centerX,d=m.centerY,q,g,c,f,p;delete h.type;for(g=0,c=k.length;g<c;g++){q=k[g];f=r.getAt(g);if(!f){f=Ext.chart.Shape[n](a,Ext.apply({group:r,x:0,y:0,translate:{x:e,y:d}},h))}else{f.show()}q.sprite=f;if(j.resizing){f.setAttributes({x:0,y:0,translate:{x:e,y:d}},true)}f._to={translate:{x:q.point[0],y:q.point[1]}};p=m.renderer(f,o.getAt(g),f._to,g,o);p=Ext.applyIf(p||{},h||{});if(j.animate){m.onAnimate(f,{to:p})}else{f.setAttributes(p,true)}}},isItemInPoint:function(c,f,e){var b,d=10,a=Math.abs;b=e.point;return(a(b[0]-c)<=d&&a(b[1]-f)<=d)},onCreateLabel:function(f,k,e,g){var h=this,j=h.labelsGroup,a=h.label,d=h.centerX,c=h.centerY,b=Ext.apply({},a,h.seriesLabelStyle||{});return h.chart.surface.add(Ext.apply({type:"text","text-anchor":"middle",group:j,x:d,y:c},b||{}))},onPlaceLabel:function(g,n,u,r,p,d,e){var z=this,o=z.chart,t=o.resizing,w=z.label,s=w.renderer,c=w.field,j=z.centerX,h=z.centerY,b={x:Number(u.point[0]),y:Number(u.point[1])},l=b.x-j,k=b.y-h,f=Math.atan2(k,l||1),m=f*180/Math.PI,q,v;function a(i){if(i<0){i+=360}return i%360}g.setAttributes({text:s(n.get(c),g,n,u,r,p,d,e),hidden:true},true);q=g.getBBox();m=a(m);if((m>45&&m<135)||(m>225&&m<315)){v=(m>45&&m<135?1:-1);b.y+=v*q.height/2}else{v=(m>=135&&m<=225?-1:1);b.x+=v*q.width/2}if(t){g.setAttributes({x:j,y:h},true)}if(d){g.show(true);z.onAnimate(g,{to:b})}else{g.setAttributes(b,true);g.show(true)}},toggleAll:function(a){var e=this,b,d,f,c;if(!a){Ext.chart.series.Radar.superclass.hideAll.call(e)}else{Ext.chart.series.Radar.superclass.showAll.call(e)}if(e.radar){e.radar.setAttributes({hidden:!a},true);if(e.radar.shadows){for(b=0,c=e.radar.shadows,d=c.length;b<d;b++){f=c[b];f.setAttributes({hidden:!a},true)}}}},hideAll:function(){this.toggleAll(false);this.hideMarkers(0)},showAll:function(){this.toggleAll(true)},hideMarkers:function(a){var d=this,c=d.markerGroup&&d.markerGroup.getCount()||0,b=a||0;for(;b<c;b++){d.markerGroup.getAt(b).hide(true)}},getAxesForXAndYFields:function(){var c=this,b=c.chart,d=b.axes,a=[].concat(d&&d.get(0));return{yAxis:a}}});