Ext.define("Ext.util.Renderable",{requires:["Ext.dom.Element"],frameCls:Ext.baseCSSPrefix+"frame",frameIdRegex:/[\-]frame\d+[TMB][LCR]$/,frameElNames:["TL","TC","TR","ML","MC","MR","BL","BC","BR"],frameTpl:["{%this.renderDockedItems(out,values,0);%}",'<tpl if="top">','<tpl if="left"><div id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {tl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {tr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>",'<tpl if="left"><div id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {mr}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</div>",'<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>','<tpl if="bottom">','<tpl if="left"><div id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></tpl>','<tpl if="right"><div id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {br}; padding-right: {frameWidth}px" role="presentation"></tpl>','<div id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></div>','<tpl if="right"></div></tpl>','<tpl if="left"></div></tpl>',"</tpl>","{%this.renderDockedItems(out,values,1);%}"],frameTableTpl:["{%this.renderDockedItems(out,values,0);%}","<table><tbody>",'<tpl if="top">',"<tr>",'<tpl if="left"><td id="{fgid}TL" class="{frameCls}-tl {baseCls}-tl {baseCls}-{ui}-tl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tl</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {tl}; padding-left:{frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}TC" class="{frameCls}-tc {baseCls}-tc {baseCls}-{ui}-tc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tc</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {tc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}TR" class="{frameCls}-tr {baseCls}-tr {baseCls}-{ui}-tr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-tr</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {tr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","<tr>",'<tpl if="left"><td id="{fgid}ML" class="{frameCls}-ml {baseCls}-ml {baseCls}-{ui}-ml<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-ml</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {ml}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}MC" class="{frameCls}-mc {baseCls}-mc {baseCls}-{ui}-mc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mc</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: 0 0;" role="presentation">',"{%this.applyRenderTpl(out, values)%}","</td>",'<tpl if="right"><td id="{fgid}MR" class="{frameCls}-mr {baseCls}-mr {baseCls}-{ui}-mr<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-mr</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {mr}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>",'<tpl if="bottom">',"<tr>",'<tpl if="left"><td id="{fgid}BL" class="{frameCls}-bl {baseCls}-bl {baseCls}-{ui}-bl<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bl</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {bl}; padding-left: {frameWidth}px" role="presentation"></td></tpl>','<td id="{fgid}BC" class="{frameCls}-bc {baseCls}-bc {baseCls}-{ui}-bc<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-bc</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {bc}; height: {frameWidth}px" role="presentation"></td>','<tpl if="right"><td id="{fgid}BR" class="{frameCls}-br {baseCls}-br {baseCls}-{ui}-br<tpl for="uiCls"> {parent.baseCls}-{parent.ui}-{.}-br</tpl><tpl if="frameElCls"> {frameElCls}</tpl>" style="background-position: {br}; padding-left: {frameWidth}px" role="presentation"></td></tpl>',"</tr>","</tpl>","</tbody></table>","{%this.renderDockedItems(out,values,1);%}"],afterRender:function(){var d=this,e={},h=d.protoEl,g=d.el,c,f,a,b;d.finishRenderChildren();if(d.contentEl){f=Ext.baseCSSPrefix;a=f+"hide-";b=Ext.get(d.contentEl);b.removeCls([f+"hidden",a+"display",a+"offsets",a+"nosize"]);d.getContentTarget().appendChild(b.dom)}if(d.styleHtmlContent){d.getTargetEl().addCls(d.styleHtmlCls)}h.writeTo(e);c=e.removed;if(c){g.removeCls(c)}c=e.cls;if(c.length){g.addCls(c)}c=e.style;if(e.style){g.setStyle(c)}d.protoEl=null;if(!d.ownerCt){d.updateLayout()}},afterFirstLayout:function(b,h){var d=this,g=d.x,e=d.y,c,a,f,i;if(!d.ownerLayout){c=Ext.isDefined(g);a=Ext.isDefined(e)}if(d.floating&&(!c||!a)){if(d.floatParent){f=d.floatParent.getTargetEl().getViewRegion();i=d.el.getAlignToXY(d.floatParent.getTargetEl(),"c-c");f.x=i[0]-f.x;f.y=i[1]-f.y}else{i=d.el.getAlignToXY(d.container,"c-c");f=d.container.translateXY(i[0],i[1])}g=c?g:f.x;e=a?e:f.y;c=a=true}if(c||a){d.setPosition(g,e)}d.onBoxReady(b,h);if(d.hasListeners.boxready){d.fireEvent("boxready",d,b,h)}},onBoxReady:Ext.emptyFn,applyRenderSelectors:function(){var d=this,b=d.renderSelectors,c=d.el,e=c.dom,a;d.applyChildEls(c);if(b){for(a in b){if(b.hasOwnProperty(a)&&b[a]){d[a]=Ext.get(Ext.DomQuery.selectNode(b[a],e))}}}},beforeRender:function(){var c=this,d=c.getTargetEl(),b=c.getComponentLayout(),a=c.getOverflowStyle();c.frame=c.frame||c.alwaysFramed;if(!b.initialized){b.initLayout()}if(d){d.setStyle(a);c.overflowStyleSet=true}c.setUI(c.ui);if(c.disabled){c.disable(true)}},doApplyRenderTpl:function(c,a){var d=a.$comp,b;if(!d.rendered){b=d.initRenderTpl();b.applyOut(a.renderData,c)}},doAutoRender:function(){var a=this;if(!a.rendered){if(a.floating){a.render(document.body)}else{a.render(Ext.isBoolean(a.autoRender)?Ext.getBody():a.autoRender)}}},doRenderContent:function(a,c){var b=c.$comp;if(b.html){Ext.DomHelper.generateMarkup(b.html,a);delete b.html}if(b.tpl){if(!b.tpl.isTemplate){b.tpl=new Ext.XTemplate(b.tpl)}if(b.data){b.tpl.applyOut(b.data,a);delete b.data}}},doRenderFramingDockedItems:function(a,c,d){var b=c.$comp;if(!b.rendered&&b.doRenderDockedItems){c.renderData.$skipDockedItems=true;b.doRenderDockedItems.call(this,a,c,d)}},finishRender:function(a){var d=this,b,e,c;if(!d.el||d.$pid){if(d.container){c=d.container.getById(d.id,true)}else{c=Ext.getDom(d.id)}if(!d.el){d.wrapPrimaryEl(c)}else{delete d.$pid;if(!d.el.dom){d.wrapPrimaryEl(d.el)}c.parentNode.insertBefore(d.el.dom,c);Ext.removeNode(c)}}else{if(!d.rendering){b=d.initRenderTpl();if(b){e=d.initRenderData();b.insertFirst(d.getTargetEl(),e)}}}if(!d.container){d.container=Ext.get(d.el.dom.parentNode)}if(d.ctCls){d.container.addCls(d.ctCls)}d.onRender(d.container,a);if(!d.overflowStyleSet){d.getTargetEl().setStyle(d.getOverflowStyle())}d.el.setVisibilityMode(Ext.Element[d.hideMode.toUpperCase()]);if(d.overCls){d.el.hover(d.addOverCls,d.removeOverCls,d)}if(d.hasListeners.render){d.fireEvent("render",d)}d.afterRender();if(d.hasListeners.afterrender){d.fireEvent("afterrender",d)}d.initEvents();if(d.hidden){d.el.hide()}},finishRenderChildren:function(){var a=this.getComponentLayout();a.finishRender()},getElConfig:function(){var g=this,h=g.autoEl,e=g.getFrameInfo(),a={tag:"div",tpl:e?g.initFramingTpl(e.table):g.initRenderTpl()},b,d,f,j,c;g.initStyles(g.protoEl);g.protoEl.writeTo(a);g.protoEl.flush();if(Ext.isString(h)){a.tag=h}else{Ext.apply(a,h)}a.id=g.id;if(a.tpl){if(e){d=g.frameElNames;f=d.length;c=g.id+"-frame1";g.frameGenId=1;a.tplData=Ext.apply({},{$comp:g,fgid:c,ui:g.ui,uiCls:g.uiCls,frameCls:g.frameCls,baseCls:g.baseCls,frameWidth:e.maxWidth,top:!!e.top,left:!!e.left,right:!!e.right,bottom:!!e.bottom,frameElCls:g.getFrameElCls?g.getFrameElCls():"",renderData:g.initRenderData()},g.getFramePositions(e));for(b=0;b<f;b++){j=d[b];g.addChildEls({name:"frame"+j,id:c+j})}g.addChildEls({name:"frameBody",id:c+"MC"})}else{a.tplData=g.initRenderData()}}return a},initFramingTpl:function(b){var a=this.getFrameTpl(b);if(a&&!a.applyRenderTpl){this.setupFramingTpl(a)}return a},setupFramingTpl:function(a){a.applyRenderTpl=this.doApplyRenderTpl;a.renderDockedItems=this.doRenderFramingDockedItems},getInsertPosition:function(a){if(a!==undefined){if(Ext.isNumber(a)){a=this.container.dom.childNodes[a]}else{a=Ext.getDom(a)}}return a},getRenderTree:function(){var a=this;if(!a.hasListeners.beforerender||a.fireEvent("beforerender",a)!==false){a.beforeRender();a.rendering=true;if(a.el){return{tag:"div",id:(a.$pid=Ext.id())}}return a.getElConfig()}return null},initContainer:function(a){var b=this;if(!a&&b.el){a=b.el.dom.parentNode;b.allowDomMove=false}b.container=a.dom?a:Ext.get(a);return b.container},initRenderData:function(){var a=this;return Ext.apply({$comp:a,id:a.id,ui:a.ui,uiCls:a.uiCls,baseCls:a.baseCls,componentCls:a.componentCls,frame:a.frame},a.renderData)},initRenderTpl:function(){var a=this.getTpl("renderTpl");if(a&&!a.renderContent){this.setupRenderTpl(a)}return a},onRender:function(d,e){var g=this,i=g.x,h=g.y,c=null,a,j,b=g.el,f;if(Ext.scopeResetCSS&&!g.ownerCt){if(b.dom===(f=Ext.getBody().dom)){b.parent().addCls(Ext.resetCls)}else{if(g.floating&&g.el.dom.parentNode===f){Ext.resetElement.appendChild(g.el)}else{g.resetEl=b.wrap(Ext.resetElementSpec,false,Ext.supports.CSS3LinearGradient?undefined:"*")}}}g.applyRenderSelectors();g.rendering=null;g.rendered=true;if(i!=null){c={x:i}}if(h!=null){(c=c||{}).y=h}if(!g.getFrameInfo()&&Ext.isBorderBox){a=g.width;j=g.height;if(typeof a==="number"){c=c||{};c.width=a}if(typeof j==="number"){c=c||{};c.height=j}}g.lastBox=b.lastBox=c},render:function(c,b){var e=this,d=e.el&&(e.el=Ext.get(e.el)),g,a,f;Ext.suspendLayouts();c=e.initContainer(c);f=e.getInsertPosition(b);if(!d){a=e.getRenderTree();if(e.ownerLayout&&e.ownerLayout.transformItemRenderTree){a=e.ownerLayout.transformItemRenderTree(a)}if(a){if(f){d=Ext.DomHelper.insertBefore(f,a)}else{d=Ext.DomHelper.append(c,a)}e.wrapPrimaryEl(d)}}else{if(!e.hasListeners.beforerender||e.fireEvent("beforerender",e)!==false){e.beforeRender();e.initStyles(d);if(e.allowDomMove!==false){if(f){c.dom.insertBefore(d.dom,f)}else{c.dom.appendChild(d.dom)}}}else{g=true}}if(d&&!g){e.finishRender(b)}Ext.resumeLayouts(!c.isDetachedBody)},ensureAttachedToBody:function(c){var b=this,a;while(b.ownerCt){b=b.ownerCt}if(b.container.isDetachedBody){b.container=a=Ext.resetElement;a.appendChild(b.el.dom);if(c){b.updateLayout()}if(typeof b.x=="number"||typeof b.y=="number"){b.setPosition(b.x,b.y)}}},setupRenderTpl:function(a){a.renderBody=a.renderContent=this.doRenderContent},wrapPrimaryEl:function(a){this.el=Ext.get(a,true)},initFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var g=this,e=g.getFrameInfo(),h,a,c,b,d=g.frameElNames,f=d.length,j;if(e){h=e.maxWidth;a=g.getFrameTpl(e.table);g.frameGenId=c=(g.frameGenId||0)+1;c=g.id+"-frame"+c;a.insertFirst(g.el,Ext.apply({$comp:g,fgid:c,ui:g.ui,uiCls:g.uiCls,frameCls:g.frameCls,baseCls:g.baseCls,frameWidth:h,top:!!e.top,left:!!e.left,right:!!e.right,bottom:!!e.bottom,frameElCls:g.getFrameElCls?g.getFrameElCls():""},g.getFramePositions(e)));g.frameBody=g.el.down("."+g.frameCls+"-mc");g.removeChildEls(function(i){return i.id&&g.frameIdRegex.test(i.id)});for(b=0;b<f;b++){j=d[b];g["frame"+j]=g.el.getById(c+j)}}},updateFrame:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return}var e=this,g=this.frameSize&&this.frameSize.table,f=this.frameTL,d=this.frameBL,c=this.frameML,a=this.frameMC,b;this.initFrame();if(a){if(e.frame){b=this.frameMC.dom.className;a.insertAfter(this.frameMC);this.frameMC.remove();this.frameBody=this.frameMC=a;a.dom.className=b;if(g){e.el.query("> table")[1].remove()}else{if(f){f.remove()}if(d){d.remove()}if(c){c.remove()}}}}else{if(e.frame){this.applyRenderSelectors()}}},getFrameInfo:function(){if(Ext.supports.CSS3BorderRadius||!this.frame){return false}var f=this,h=f.frameInfoCache,a=f.el||f.protoEl,i=a.dom?a.dom.className:a.classList.join(" "),d=h[i],e,c,g,b;if(d==null){e=Ext.fly(f.getStyleProxy(i),"frame-style-el");c=e.getStyle("background-position-x");g=e.getStyle("background-position-y");if(!c&&!g){b=e.getStyle("background-position").split(" ");c=b[0];g=b[1]}d=f.calculateFrame(c,g);if(d){a.setStyle("background-image","none")}if(f.frame===true&&!d){Ext.log.error("You have set frame: true explicity on this component ("+f.getXType()+") and it does not have any framing defined in the CSS template. In this case IE cannot figure out what sizes to use and thus framing on this component will be disabled.")}h[i]=d}f.frame=!!d;f.frameSize=d;return d},calculateFrame:function(g,f){if(!(parseInt(g,10)>=1000000&&parseInt(f,10)>=1000000)){return false}var a=Math.max,b=parseInt(g.substr(3,2),10),e=parseInt(g.substr(5,2),10),c=parseInt(f.substr(3,2),10),h=parseInt(f.substr(5,2),10),d={table:g.substr(0,3)=="110",vertical:f.substr(0,3)=="110",top:a(b,e),right:a(e,c),bottom:a(h,c),left:a(b,h)};d.maxWidth=a(d.top,d.right,d.bottom,d.left);d.width=d.left+d.right;d.height=d.top+d.bottom;return d},getStyleProxy:function(b){var a=this.styleProxyEl||(Ext.AbstractComponent.prototype.styleProxyEl=Ext.resetElement.createChild({style:{position:"absolute",top:"-10000px"}},null,true));a.className=b;return a},getFramePositions:function(g){var f=this,c=g.maxWidth,e=f.dock,b,a,h,d;if(g.vertical){b=f.getVertCenterFramePositions(c,e);a={tl:"0 -"+(c*0)+"px",tr:"0 -"+(c*1)+"px",bl:"0 -"+(c*2)+"px",br:"0 -"+(c*3)+"px",ml:"-"+(c*1)+"px 0",mr:"right 0",tc:b.tc,bc:b.bc}}else{h="-"+(c*0)+"px 0";d="right 0";if(e&&e=="bottom"){h="left bottom";d="right bottom"}a={tl:"0 -"+(c*2)+"px",tr:"right -"+(c*3)+"px",bl:"0 -"+(c*4)+"px",br:"right -"+(c*5)+"px",ml:h,mr:d,tc:"0 -"+(c*0)+"px",bc:"0 -"+(c*1)+"px"}}return a},getVertCenterFramePositions:function(b,c){var a,d;if(c&&c=="right"){a="right 0";d="right -"+b+"px"}else{a="0 0";d="0 -"+b+"px"}return{tc:a,bc:d}},getFrameTpl:function(a){return this.getTpl(a?"frameTableTpl":"frameTpl")},frameInfoCache:{}});