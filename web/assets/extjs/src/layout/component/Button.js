Ext.define("Ext.layout.component.Button",{alias:["layout.button"],extend:"Ext.layout.component.Auto",type:"button",cellClsRE:/-btn-(tl|br)\b/,htmlRE:/<.*>/,constructor:function(){this.callParent(arguments);this.hackWidth=Ext.isIEQuirks||Ext.isIE8m;this.heightIncludesPadding=Ext.isIE6&&Ext.isStrict},beginLayout:function(a){this.callParent(arguments);this.cacheTargetInfo(a)},beginLayoutCycle:function(e){var c=this,d="",a=c.owner,b=a.btnEl,h=a.btnInnerEl,f=a.text,g;c.callParent(arguments);h.setStyle("overflow",d);if(!e.widthModel.natural){a.el.setStyle("width",d)}g=e.heightModel.shrinkWrap&&f&&c.htmlRE.test(f);b.setStyle("width",d);b.setStyle("height",g?"auto":d);h.setStyle("width",d);h.setStyle("height",g?"auto":d);h.setStyle("line-height",g?"normal":d);h.setStyle("padding-top",d);a.btnIconEl.setStyle("width",d)},calculateOwnerHeightFromContentHeight:function(b,a){return a},calculateOwnerWidthFromContentWidth:function(b,a){return a},measureContentWidth:function(c){var h=this,b=h.owner,f=b.btnEl,d=b.btnInnerEl,k=b.text,l,i,g,a,j,e;if(b.text&&h.hackWidth&&f){l=h.btnFrameWidth;if(k.indexOf(">")===-1){k=k.replace(/</g,"&lt;")}i=Ext.util.TextMetrics.measure(d,k);a=i.width+l+h.adjWidth;j=c.getEl("btnEl");e=c.getEl("btnInnerEl");g=(b.icon||b.iconCls)&&(b.iconAlign=="top"||b.iconAlign=="bottom");c.setWidth(a);j.setWidth(i.width+l);e.setWidth(i.width+l);if(g){b.btnIconEl.setWidth(i.width+l)}}else{a=c.el.getWidth()}return a},measureContentHeight:function(d){var i=this,b=i.owner,e=b.btnInnerEl,h=d.getEl("btnEl"),f=d.getEl("btnInnerEl"),c=i.minTextHeight,g=i.adjHeight,l=b.getText(),k,j,a;if(b.vertical){k=Ext.util.TextMetrics.measure(e,b.text).width;k+=i.btnFrameHeight+g;d.setHeight(k,true,true)}else{if(l&&i.htmlRE.test(l)){j=e.getHeight();if(j<c){a=Math.floor((c-j)/2);f.setHeight(c-(i.heightIncludesPadding?a:0));f.setProp("padding-top",a);j=c}k=j+g}else{k=d.el.getHeight()}}h.setHeight(k-g);return k},publishInnerHeight:function(c,l){var i=this,a=i.owner,f=Ext.isNumber,h=c.getEl("btnEl"),d=a.btnInnerEl,g=c.getEl("btnInnerEl"),e=f(l)?l-i.adjHeight:l,b=i.btnFrameHeight,k=a.getText(),j,m;h.setHeight(e);g.setHeight(e);if(!a.vertical&&e>=0){g.setProp("line-height",e-b+"px")}if(k&&i.htmlRE.test(k)){g.setProp("line-height","normal");d.setStyle("line-height","normal");j=Ext.util.TextMetrics.measure(d,k).height;m=Math.floor(Math.max(e-b-j,0)/2);g.setProp("padding-top",i.btnFrameTop+m);g.setHeight(e-(i.heightIncludesPadding?m:0))}},publishInnerWidth:function(f,c){var e=this,g=Ext.isNumber,a=f.getEl("btnEl"),b=f.getEl("btnInnerEl"),d=g(c)?c-e.adjWidth:c;a.setWidth(d);b.setWidth(d)},clearTargetCache:function(){delete this.adjWidth},cacheTargetInfo:function(b){var f=this,a=f.owner,d=a.scale,h,e,i,c,g;if(!("adjWidth" in f)||f.lastScale!==d){if(f.lastScale){a.btnInnerEl.setStyle("line-height","")}f.lastScale=d;h=b.getPaddingInfo();e=b.getFrameInfo();i=b.getEl("btnWrap").getPaddingInfo();c=b.getEl("btnInnerEl");g=c.getPaddingInfo();Ext.apply(f,{adjWidth:i.width+e.width+h.width,adjHeight:i.height+e.height+h.height,btnFrameWidth:g.width,btnFrameHeight:g.height,btnFrameTop:g.top,minTextHeight:parseInt(c.getStyle("line-height"),10)})}f.callParent(arguments)},finishedLayout:function(){var a=this.owner;this.callParent(arguments);if(Ext.isWebKit){a.el.dom.offsetWidth}}});