Ext.dom.Element.override((function(){var d=document,c=window,a=/^([a-z]+)-([a-z]+)(\?)?$/,b=Math.round;return{getAnchorXY:function(i,n,g){i=(i||"tl").toLowerCase();g=g||{};var l=this,h=l.dom==d.body||l.dom==d,e=g.width||h?Ext.dom.Element.getViewWidth():l.getWidth(),f=g.height||h?Ext.dom.Element.getViewHeight():l.getHeight(),p,m=l.getXY(),o=l.getScroll(),k=h?o.left:!n?m[0]:0,j=h?o.top:!n?m[1]:0;switch(i){case"tl":p=[0,0];break;case"bl":p=[0,f];break;case"tr":p=[e,0];break;case"c":p=[b(e*0.5),b(f*0.5)];break;case"t":p=[b(e*0.5),0];break;case"l":p=[0,b(f*0.5)];break;case"r":p=[e,b(f*0.5)];break;case"b":p=[b(e*0.5),f];break;case"br":p=[e,f]}return[p[0]+k,p[1]+j]},getAlignToXY:function(l,F,i){l=Ext.get(l);if(!l||!l.dom){Ext.Error.raise({sourceClass:"Ext.dom.Element",sourceMethod:"getAlignToXY",msg:"Attempted to align an element that doesn't exist"})}i=i||[0,0];F=(!F||F=="?"?"tl-bl?":(!(/-/).test(F)&&F!==""?"tl-"+F:F||"tl-bl")).toLowerCase();var G=this,k,v,p,n,j,w,z,D=Ext.dom.Element.getViewWidth()-10,h=Ext.dom.Element.getViewHeight()-10,f,g,m,o,t,u,E=d.documentElement,r=d.body,C=(E.scrollLeft||r.scrollLeft||0),A=(E.scrollTop||r.scrollTop||0),B,s,q,e=F.match(a);if(!e){Ext.Error.raise({sourceClass:"Ext.dom.Element",sourceMethod:"getAlignToXY",el:l,position:F,offset:i,msg:'Attemmpted to align an element with an invalid position: "'+F+'"'})}s=e[1];q=e[2];B=!!e[3];k=G.getAnchorXY(s,true);v=l.getAnchorXY(q,false);p=v[0]-k[0]+i[0];n=v[1]-k[1]+i[1];if(B){j=G.getWidth();w=G.getHeight();z=l.getRegion();f=s.charAt(0);g=s.charAt(s.length-1);m=q.charAt(0);o=q.charAt(q.length-1);t=((f=="t"&&m=="b")||(f=="b"&&m=="t"));u=((g=="r"&&o=="l")||(g=="l"&&o=="r"));if(p+j>D+C){p=u?z.left-j:D+C-j}if(p<C){p=u?z.right:C}if(n+w>h+A){n=t?z.top-w:h+A-w}if(n<A){n=t?z.bottom:A}}return[p,n]},anchorTo:function(f,k,g,e,n,o){var l=this,i=l.dom,m=!Ext.isEmpty(n),h=function(){Ext.fly(i).alignTo(f,k,g,e);Ext.callback(o,Ext.fly(i))},j=this.getAnchor();this.removeAnchor();Ext.apply(j,{fn:h,scroll:m});Ext.EventManager.onWindowResize(h,null);if(m){Ext.EventManager.on(c,"scroll",h,null,{buffer:!isNaN(n)?n:50})}h.call(l);return l},removeAnchor:function(){var f=this,e=this.getAnchor();if(e&&e.fn){Ext.EventManager.removeResizeListener(e.fn);if(e.scroll){Ext.EventManager.un(c,"scroll",e.fn)}delete e.fn}return f},getAlignVector:function(g,f,i){var h=this,e=h.getXY(),j=h.getAlignToXY(g,f,i);g=Ext.get(g);if(!g||!g.dom){Ext.Error.raise({sourceClass:"Ext.dom.Element",sourceMethod:"getAlignVector",msg:"Attempted to align an element that doesn't exist"})}j[0]-=e[0];j[1]-=e[1];return j},alignTo:function(g,e,i,f){var h=this;return h.setXY(h.getAlignToXY(g,e,i),h.anim&&!!f?h.anim(f):false)},getConstrainVector:function(h,f){if(!(h instanceof Ext.util.Region)){h=Ext.get(h).getViewRegion()}var j=this.getRegion(),e=[0,0],i=(this.shadow&&!this.shadowDisabled)?this.shadow.getShadowSize():undefined,g=false;if(f){j.translateBy(f[0]-j.x,f[1]-j.y)}if(i){h.adjust(i[0],-i[1],-i[2],i[3])}if(j.right>h.right){g=true;e[0]=(h.right-j.right)}if(j.left+e[0]<h.left){g=true;e[0]=(h.left-j.left)}if(j.bottom>h.bottom){g=true;e[1]=(h.bottom-j.bottom)}if(j.top+e[1]<h.top){g=true;e[1]=(h.top-j.top)}return g?e:false},getCenterXY:function(){return this.getAlignToXY(d,"c-c")},center:function(e){return this.alignTo(e||d,"c-c")}}}()));