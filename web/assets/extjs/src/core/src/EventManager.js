Ext.EventManager=new function(){var a=this,e=document,d=window,b=Ext.baseCSSPrefix,f,c=function(){var k=e.body||e.getElementsByTagName("body")[0],o=[b+"body"],h=[],m=Ext.supports.CSS3LinearGradient,l=Ext.supports.CSS3BorderRadius,i=[],j,g;if(!k){return false}j=k.parentNode;function n(p){o.push(b+p)}if(Ext.isIE&&Ext.isIE9m){n("ie");if(Ext.isIE6){n("ie6")}else{n("ie7p");if(Ext.isIE7){n("ie7")}else{n("ie8p");if(Ext.isIE8){n("ie8")}else{n("ie9p");if(Ext.isIE9){n("ie9")}}}}if(Ext.isIE7m){n("ie7m")}if(Ext.isIE8m){n("ie8m")}if(Ext.isIE9m){n("ie9m")}if(Ext.isIE7||Ext.isIE8){n("ie78")}}if(Ext.isIE10){n("ie10")}if(Ext.isGecko){n("gecko");if(Ext.isGecko3){n("gecko3")}if(Ext.isGecko4){n("gecko4")}if(Ext.isGecko5){n("gecko5")}}if(Ext.isOpera){n("opera")}if(Ext.isWebKit){n("webkit")}if(Ext.isSafari){n("safari");if(Ext.isSafari2){n("safari2")}if(Ext.isSafari3){n("safari3")}if(Ext.isSafari4){n("safari4")}if(Ext.isSafari5){n("safari5")}if(Ext.isSafari5_0){n("safari5_0")}}if(Ext.isChrome){n("chrome")}if(Ext.isMac){n("mac")}if(Ext.isLinux){n("linux")}if(!l){n("nbr")}if(!m){n("nlg")}if(Ext.scopeResetCSS){g=Ext.resetElementSpec={cls:b+"reset"};if(!m){i.push(b+"nlg")}if(!l){i.push(b+"nbr")}if(i.length){g.cn={cls:i.join(" ")}}Ext.resetElement=Ext.getBody().createChild(g);if(i.length){Ext.resetElement=Ext.get(Ext.resetElement.dom.firstChild)}}else{Ext.resetElement=Ext.getBody();n("reset")}if(j){if(Ext.isStrict&&(Ext.isIE6||Ext.isIE7)){Ext.isBorderBox=false}else{Ext.isBorderBox=true}if(Ext.isBorderBox){h.push(b+"border-box")}if(Ext.isStrict){h.push(b+"strict")}else{h.push(b+"quirks")}Ext.fly(j,"_internal").addCls(h)}Ext.fly(k,"_internal").addCls(o);return true};Ext.apply(a,{hasBoundOnReady:false,hasFiredReady:false,deferReadyEvent:1,onReadyChain:[],readyEvent:(function(){f=new Ext.util.Event();f.fire=function(){Ext._beforeReadyTime=Ext._beforeReadyTime||new Date().getTime();f.self.prototype.fire.apply(f,arguments);Ext._afterReadytime=new Date().getTime()};return f}()),idleEvent:new Ext.util.Event(),isReadyPaused:function(){return(/[?&]ext-pauseReadyFire\b/i.test(location.search)&&!Ext._continueFireReady)},bindReadyEvent:function(){if(a.hasBoundOnReady){return}if(e.readyState=="complete"){a.onReadyEvent({type:e.readyState||"body"})}else{e.addEventListener("DOMContentLoaded",a.onReadyEvent,false);d.addEventListener("load",a.onReadyEvent,false);a.hasBoundOnReady=true}},onReadyEvent:function(g){if(g&&g.type){a.onReadyChain.push(g.type)}if(a.hasBoundOnReady){e.removeEventListener("DOMContentLoaded",a.onReadyEvent,false);d.removeEventListener("load",a.onReadyEvent,false)}if(!Ext.isReady){a.fireDocReady()}},fireDocReady:function(){if(!Ext.isReady){Ext._readyTime=new Date().getTime();Ext.isReady=true;Ext.supports.init();a.onWindowUnload();f.onReadyChain=a.onReadyChain;if(Ext.isNumber(a.deferReadyEvent)){Ext.Function.defer(a.fireReadyEvent,a.deferReadyEvent);a.hasDocReadyTimer=true}else{a.fireReadyEvent()}}},fireReadyEvent:function(){a.hasDocReadyTimer=false;a.isFiring=true;while(f.listeners.length&&!a.isReadyPaused()){f.fire()}a.isFiring=false;a.hasFiredReady=true;Ext.EventManager.idleEvent.fire()},onDocumentReady:function(i,h,g){g=g||{};g.single=true;f.addListener(i,h,g);if(!(a.isFiring||a.hasDocReadyTimer)){if(Ext.isReady){a.fireReadyEvent()}else{a.bindReadyEvent()}}},stoppedMouseDownEvent:new Ext.util.Event(),propRe:/^(?:scope|delay|buffer|single|stopEvent|preventDefault|stopPropagation|normalized|args|delegate|freezeEvent)$/,getId:function(g){var h;g=Ext.getDom(g);if(g===e||g===d){h=g===e?Ext.documentId:Ext.windowId}else{h=Ext.id(g)}if(!Ext.cache[h]){Ext.addCacheEntry(h,null,g)}return h},prepareListenerConfig:function(j,h,l){var m=a.propRe,i,k,g;for(i in h){if(h.hasOwnProperty(i)){if(!m.test(i)){k=h[i];if(typeof k=="function"){g=[j,i,k,h.scope,h]}else{g=[j,i,k.fn,k.scope,k]}if(l){a.removeListener.apply(a,g)}else{a.addListener.apply(a,g)}}}}},mouseEnterLeaveRe:/mouseenter|mouseleave/,normalizeEvent:function(g,h){if(a.mouseEnterLeaveRe.test(g)&&!Ext.supports.MouseEnterLeave){if(h){h=Ext.Function.createInterceptor(h,a.contains)}g=g=="mouseenter"?"mouseover":"mouseout"}else{if(g=="mousewheel"&&!Ext.supports.MouseWheel&&!Ext.isOpera){g="DOMMouseScroll"}}return{eventName:g,fn:h}},contains:function(h){h=h.browserEvent||h;var g=h.currentTarget,i=a.getRelatedTarget(h);if(g&&g.firstChild){while(i){if(i===g){return false}i=i.parentNode;if(i&&(i.nodeType!=1)){i=null}}}return true},addListener:function(k,m,o,p,q){if(typeof m!=="string"){a.prepareListenerConfig(k,m);return}var j=k.dom||Ext.getDom(k),n,i,g,h,l;if(!o){Ext.Error.raise({sourceClass:"Ext.EventManager",sourceMethod:"addListener",targetElement:k,eventName:m,msg:'Error adding "'+m+'" listener. The handler function is undefined.'})}q=q||{};n=a.normalizeEvent(m,o);i=a.createListenerWrap(j,m,n.fn,p,q);g=a.getEventListenerCache(k.dom?k:j,m);m=n.eventName;if(j.attachEvent){h=a.normalizeId(j);if(h){l=Ext.cache[h][m];if(l&&l.firing){g=a.cloneEventListenerCache(j,m)}}}g.push({fn:o,wrap:i,scope:p});if(j.attachEvent){if(g.length===1){h=a.normalizeId(j,true);o=Ext.Function.bind(a.handleSingleEvent,a,[h,m],true);Ext.cache[h][m]={firing:false,fn:o};j.attachEvent("on"+m,o)}}else{j.addEventListener(m,i,q.capture||false)}if(j==e&&m=="mousedown"){a.stoppedMouseDownEvent.addListener(i)}},normalizeId:function(g){var h;if(g===document){h=Ext.documentId}else{if(g===window){h=Ext.windowId}else{h=g.id}}if(!h&&force){h=a.getId(g)}return h},handleSingleEvent:function(m,n,j){var k=a.getEventListenerCache(n,j),h=Ext.cache[n][j],g,l;if(h.firing){return}h.firing=true;for(l=0,g=k.length;l<g;++l){k[l].wrap(m)}h.firing=false},removeListener:function(q,s,t,v){if(typeof s!=="string"){a.prepareListenerConfig(q,s,true);return}var o=Ext.getDom(q),k,l=q.dom?q:Ext.get(o),g=a.getEventListenerCache(l,s),u=a.normalizeEvent(s).eventName,p=g.length,n,r,m,h;while(p--){m=g[p];if(m&&(!t||m.fn==t)&&(!v||m.scope===v)){h=m.wrap;if(h.task){clearTimeout(h.task);delete h.task}n=h.tasks&&h.tasks.length;if(n){while(n--){clearTimeout(h.tasks[n])}delete h.tasks}if(o.detachEvent){k=a.normalizeId(o,true);r=Ext.cache[k][u];if(r&&r.firing){g=a.cloneEventListenerCache(o,u)}if(g.length===1){t=r.fn;delete Ext.cache[k][u];o.detachEvent("on"+u,t)}}else{o.removeEventListener(u,h,false)}if(h&&o==e&&s=="mousedown"){a.stoppedMouseDownEvent.removeListener(h)}Ext.Array.erase(g,p,1)}}},removeAll:function(j){var k=(typeof j==="string")?j:j.id,h,i,g;if(k&&(h=Ext.cache[k])){i=h.events;for(g in i){if(i.hasOwnProperty(g)){a.removeListener(j,g)}}h.events={}}},purgeElement:function(k,h){var m=Ext.getDom(k),j=0,g,l;if(h){a.removeListener(k,h)}else{a.removeAll(k)}if(m&&m.childNodes){l=m.childNodes;for(g=l.length;j<g;j++){a.purgeElement(l[j],h)}}},createListenerWrap:function(j,i,m,n,o){o=o||{};var l,k,g=/\\/g,h=function(q,p){if(!k){l=["if(!"+Ext.name+") {return;}"];if(o.buffer||o.delay||o.freezeEvent){if(o.freezeEvent){l.push("e = X.EventObject.setEvent(e);")}l.push("e = new X.EventObjectImpl(e, "+(o.freezeEvent?"true":"false")+");")}else{l.push("e = X.EventObject.setEvent(e);")}if(o.delegate){l.push('var result, t = e.getTarget("'+(o.delegate+"").replace(g,"\\\\")+'", this);');l.push("if(!t) {return;}")}else{l.push("var t = e.target, result;")}if(o.target){l.push("if(e.target !== options.target) {return;}")}if(o.stopEvent){l.push("e.stopEvent();")}else{if(o.preventDefault){l.push("e.preventDefault();")}if(o.stopPropagation){l.push("e.stopPropagation();")}}if(o.normalized===false){l.push("e = e.browserEvent;")}if(o.buffer){l.push("(wrap.task && clearTimeout(wrap.task));");l.push("wrap.task = setTimeout(function() {")}if(o.delay){l.push("wrap.tasks = wrap.tasks || [];");l.push("wrap.tasks.push(setTimeout(function() {")}l.push("result = fn.call(scope || dom, e, t, options);");if(o.single){l.push("evtMgr.removeListener(dom, ename, fn, scope);")}if(i!=="mousemove"&&i!=="unload"){l.push("if (evtMgr.idleEvent.listeners.length) {");l.push("evtMgr.idleEvent.fire();");l.push("}")}if(o.delay){l.push("}, "+o.delay+"));")}if(o.buffer){l.push("}, "+o.buffer+");")}l.push("return result;");k=Ext.cacheableFunctionFactory("e","options","fn","scope","ename","dom","wrap","args","X","evtMgr",l.join("\n"))}return k.call(j,q,o,m,n,i,j,h,p,Ext,a)};return h},getEventCache:function(i){var h,g,j;if(!i){return[]}if(i.$cache){h=i.$cache}else{if(typeof i==="string"){j=i}else{j=a.getId(i)}h=Ext.cache[j]}g=h.events||(h.events={});return g},getEventListenerCache:function(i,g){var h=a.getEventCache(i);return h[g]||(h[g]=[])},cloneEventListenerCache:function(j,g){var i=a.getEventCache(j),h;if(i[g]){h=i[g].slice(0)}else{h=[]}i[g]=h;return h},mouseLeaveRe:/(mouseout|mouseleave)/,mouseEnterRe:/(mouseover|mouseenter)/,stopEvent:function(g){a.stopPropagation(g);a.preventDefault(g)},stopPropagation:function(g){g=g.browserEvent||g;if(g.stopPropagation){g.stopPropagation()}else{g.cancelBubble=true}},preventDefault:function(g){g=g.browserEvent||g;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false;try{if(g.ctrlKey||g.keyCode>111&&g.keyCode<124){g.keyCode=-1}}catch(h){}}},getRelatedTarget:function(g){g=g.browserEvent||g;var h=g.relatedTarget;if(!h){if(a.mouseLeaveRe.test(g.type)){h=g.toElement}else{if(a.mouseEnterRe.test(g.type)){h=g.fromElement}}}return a.resolveTextNode(h)},getPageX:function(g){return a.getPageXY(g)[0]},getPageY:function(g){return a.getPageXY(g)[1]},getPageXY:function(i){i=i.browserEvent||i;var h=i.pageX,k=i.pageY,j=e.documentElement,g=e.body;if(!h&&h!==0){h=i.clientX+(j&&j.scrollLeft||g&&g.scrollLeft||0)-(j&&j.clientLeft||g&&g.clientLeft||0);k=i.clientY+(j&&j.scrollTop||g&&g.scrollTop||0)-(j&&j.clientTop||g&&g.clientTop||0)}return[h,k]},getTarget:function(g){g=g.browserEvent||g;return a.resolveTextNode(g.target||g.srcElement)},resolveTextNode:Ext.isGecko?function(h){if(h){var g=HTMLElement.prototype.toString.call(h);if(g!=="[xpconnect wrapped native prototype]"&&g!=="[object XULElement]"){return h.nodeType==3?h.parentNode:h}}}:function(g){return g&&g.nodeType==3?g.parentNode:g},curWidth:0,curHeight:0,onWindowResize:function(j,i,h){var g=a.resizeEvent;if(!g){a.resizeEvent=g=new Ext.util.Event();a.on(d,"resize",a.fireResize,null,{buffer:100})}g.addListener(j,i,h)},fireResize:function(){var g=Ext.Element.getViewWidth(),i=Ext.Element.getViewHeight();if(a.curHeight!=i||a.curWidth!=g){a.curHeight=i;a.curWidth=g;a.resizeEvent.fire(g,i)}},removeResizeListener:function(i,h){var g=a.resizeEvent;if(g){g.removeListener(i,h)}},onWindowUnload:function(j,i,h){var g=a.unloadEvent;if(!g){a.unloadEvent=g=new Ext.util.Event();a.addListener(d,"unload",a.fireUnload)}if(j){g.addListener(j,i,h)}},fireUnload:function(){try{e=d=undefined;var m,h,k,j,g;a.unloadEvent.fire();if(Ext.isGecko3){m=Ext.ComponentQuery.query("gridview");h=0;k=m.length;for(;h<k;h++){m[h].scrollToTop()}}g=Ext.cache;for(j in g){if(g.hasOwnProperty(j)){a.removeAll(j)}}}catch(l){}},removeUnloadListener:function(i,h){var g=a.unloadEvent;if(g){g.removeListener(i,h)}},useKeyDown:Ext.isWebKit?parseInt(navigator.userAgent.match(/AppleWebKit\/(\d+)/)[1],10)>=525:!((Ext.isGecko&&!Ext.isWindows)||Ext.isOpera),getKeyEvent:function(){return a.useKeyDown?"keydown":"keypress"}});if(!("addEventListener" in document)&&document.attachEvent){Ext.apply(a,{pollScroll:function(){var g=true;try{document.documentElement.doScroll("left")}catch(h){g=false}if(g&&document.body){a.onReadyEvent({type:"doScroll"})}else{a.scrollTimeout=setTimeout(a.pollScroll,20)}return g},scrollTimeout:null,readyStatesRe:/complete/i,checkReadyState:function(){var g=document.readyState;if(a.readyStatesRe.test(g)){a.onReadyEvent({type:g})}},bindReadyEvent:function(){var g=true;if(a.hasBoundOnReady){return}try{g=window.frameElement===undefined}catch(h){g=false}if(!g||!e.documentElement.doScroll){a.pollScroll=Ext.emptyFn}if(a.pollScroll()===true){return}if(e.readyState=="complete"){a.onReadyEvent({type:"already "+(e.readyState||"body")})}else{e.attachEvent("onreadystatechange",a.checkReadyState);window.attachEvent("onload",a.onReadyEvent);a.hasBoundOnReady=true}},onReadyEvent:function(g){if(g&&g.type){a.onReadyChain.push(g.type)}if(a.hasBoundOnReady){document.detachEvent("onreadystatechange",a.checkReadyState);window.detachEvent("onload",a.onReadyEvent)}if(Ext.isNumber(a.scrollTimeout)){clearTimeout(a.scrollTimeout);delete a.scrollTimeout}if(!Ext.isReady){a.fireDocReady()}},onReadyChain:[]})}Ext.onReady=function(i,h,g){Ext.Loader.onReady(i,h,true,g)};Ext.onDocumentReady=a.onDocumentReady;a.on=a.addListener;a.un=a.removeListener;Ext.onReady(c)};