Ext.define("Ext.view.TableLayout",{extend:"Ext.layout.component.Auto",requires:["Ext.util.CSS"],alias:["layout.tableview"],type:"tableview",beginLayout:function(d){var c=this,b=c.owner.lockingPartner,a=c.owner;c.callParent(arguments);if(b){c.lockedGrid=c.owner.up("[lockable]");c.lockedGrid.needsRowHeightSync=true;if(!d.lockingPartner){d.lockingPartner=d.context.getItem(b,b.el);if(d.lockingPartner&&!d.lockingPartner.lockingPartner){d.lockingPartner.lockingPartner=d}}}d.headerContext=d.context.getCmp(c.headerCt);if(c.owner.body.dom){d.bodyContext=d.getEl(c.owner.body)}if(Ext.isWebKit){a.el.select(a.getBodySelector()).setStyle("table-layout","auto")}},calculate:function(f){var e=this,c=e.lockingPartner,a=e.owner,d=0,b;if(f.headerContext.hasProp("columnWidthsDone")){if(!e.setColumnWidths(f)){e.done=false;return}f.state.columnWidthsSynced=true;if(f.bodyContext){b=e.owner.el.down("."+a.ownerCt.emptyCls,true);if(!b){d=f.bodyContext.el.dom.offsetHeight;f.bodyContext.setHeight(d,false)}else{d=b.offsetHeight}f.setProp("contentHeight",d)}if(c&&!c.state.columnWidthsSynced){e.done=false}else{e.callParent(arguments)}}else{e.done=false}},measureContentHeight:function(b){var a=b.lockingPartner;if(!b.bodyContext||(b.state.columnWidthsSynced&&(!a||a.state.columnWidthsSynced))){return this.callParent(arguments)}},setColumnWidths:function(d){var m=this,c=m.owner,b=d.context,f=m.headerCt.getVisibleGridColumns(),e,j=0,l=f.length,k=0,a=0,n,h,g=!Ext.isBorderBox;if(b){b.currentLayout=m}for(j=0;j<l;j++){e=f[j];n=b.getCmp(e);h=n.props.width;if(isNaN(h)){n.getProp("width");return false}k+=h;if(g&&c.columnLines){if(!a){a=b.getCmp(e).borderInfo.width||1}h-=a}c.body.select(c.getColumnSizerSelector(e)).setWidth(h)}c.el.select(c.getBodySelector()).setWidth(k);return true},finishedLayout:function(){var b=this,a=b.owner;b.callParent(arguments);if(Ext.isWebKit){a.el.select(a.getBodySelector()).setStyle("table-layout","")}if(a.refreshCounter&&b.lockedGrid&&b.lockedGrid.syncRowHeight&&b.lockedGrid.needsRowHeightSync){b.lockedGrid.syncRowHeights();b.lockedGrid.needsRowHeightSync=false}}});