Ext.define("Ext.perf.Accumulator",(function(){var c=null,g=Ext.global.chrome,d,b=function(){b=function(){return new Date().getTime()};var k,l;if(Ext.isChrome&&g&&g.Interval){k=new g.Interval();k.start();b=function(){return k.microseconds()/1000}}else{if(window.ActiveXObject){try{l=new ActiveXObject("SenchaToolbox.Toolbox");Ext.senchaToolbox=l;b=function(){return l.milliseconds}}catch(m){}}else{if(Date.now){b=Date.now}}}Ext.perf.getTimestamp=Ext.perf.Accumulator.getTimestamp=b;return b()};function h(l,k){l.sum+=k;l.min=Math.min(l.min,k);l.max=Math.max(l.max,k)}function e(n){var l=n?n:(b()-this.time),m=this,k=m.accum;++k.count;if(!--k.depth){h(k.total,l)}h(k.pure,l-m.childTime);c=m.parent;if(c){++c.accum.childCount;c.childTime+=l}}function a(){return{min:Number.MAX_VALUE,max:0,sum:0}}function i(l,k){return function(){var n=l.enter(),m=k.apply(this,arguments);n.leave();return m}}function j(k){return Math.round(k*100)/100}function f(m,l,k,o){var n={avg:0,min:o.min,max:o.max,sum:0};if(m){k=k||0;n.sum=o.sum-l*k;n.avg=n.sum/m}return n}return{constructor:function(k){var l=this;l.count=l.childCount=l.depth=l.maxDepth=0;l.pure=a();l.total=a();l.name=k},statics:{getTimestamp:b},format:function(k){if(!d){d=new Ext.XTemplate(["{name} - {count} call(s)",'<tpl if="count">','<tpl if="childCount">'," ({childCount} children)","</tpl>",'<tpl if="depth - 1">'," ({depth} deep)","</tpl>",'<tpl for="times">',", {type}: {[this.time(values.sum)]} msec (","avg={[this.time(values.sum / parent.count)]}",")","</tpl>","</tpl>"].join(""),{time:function(m){return Math.round(m*100)/100}})}var l=this.getData(k);l.name=this.name;l.pure.type="Pure";l.total.type="Total";l.times=[l.pure,l.total];return d.apply(l)},getData:function(k){var l=this;return{count:l.count,childCount:l.childCount,depth:l.maxDepth,pure:f(l.count,l.childCount,k,l.pure),total:f(l.count,l.childCount,k,l.total)}},enter:function(){var k=this,l={accum:k,leave:e,childTime:0,parent:c};++k.depth;if(k.maxDepth<k.depth){k.maxDepth=k.depth}c=l;l.time=b();return l},monitor:function(m,l,k){var n=this.enter();if(k){m.apply(l,k)}else{m.call(l)}n.leave()},report:function(){Ext.log(this.format())},tap:function(s,u){var t=this,n=typeof u=="string"?[u]:u,r,v,p,o,m,l,k,q;q=function(){if(typeof s=="string"){r=Ext.global;o=s.split(".");for(p=0,m=o.length;p<m;++p){r=r[o[p]]}}else{r=s}for(p=0,m=n.length;p<m;++p){l=n[p];v=l.charAt(0)=="!";if(v){l=l.substring(1)}else{v=!(l in r.prototype)}k=v?r:r.prototype;k[l]=i(t,k[l])}};Ext.ClassManager.onCreated(q,t,s);return t}}}()),function(){Ext.perf.getTimestamp=this.getTimestamp});